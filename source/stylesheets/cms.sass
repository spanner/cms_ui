@import lib/definitions
@import lib/fonts
@import lib/loader
@import lib/prism

$control_height: 36px

a
  cursor: pointer
  text-decoration: none

body
  +book
  color: $dark
  margin: 0
  height: 100%

body, html
  height: 100%

#editor [contenteditable]
  border: 6px solid white
  background-color: #eaeaed
  outline: none
  border-radius: 5px

h1, h2, h3
  font-weight: normal

h2.label
  color: $mid
  font-size: 10px
  margin: 0
  padding: 10px

a.add, a.delete, a.admin, a.save
  display: inline-block
  vertical-align: top
  width: 20px
  height: 20px
  text-indent: 20px
  overflow: hidden
  background:
    position: 0 0
    repeat: no-repeat
    image: image-url('linksprite.png')

a.add
  background-position: 0 0
  &:hover
    background-position: 0 -32px

a.delete
  background-position: 0 -192px
  &:hover
    background-position: 0 -224px

a.admin
  background-position: 0 -96px
  &:hover
    background-position: 0 -128px

a.save
  background-position: 0 -288px
  &:hover
    background-position: 0 -320px

a.button
  &.save
    +button($green)
  &.revert
    +button($pale)
  &.preview
    +button($rubine)

#cms
  position: absolute
  top: 0
  right: 0
  bottom: 0
  left: 0

#spanner

#ui
  position: absolute
  height: 100%
  width: 100%

#session
  height: 100%
  width: 100%


#site_editor
  position: fixed
  width: 0
  bottom: 0
  top: $control_height
  background: $dark
  color: $mid
  overflow: hidden
  &.open
    width: 30%
    & + div
      width: calc(70% - 1px)
  nav
    width: 100%
    display: table
    a
      display: table-cell
      text-align: center
      line-height: 2em
      background: $coolgrey11
      &:hover
        color: $mid
        background: $coolgrey1
      &.current
        color: $verypale
        background: $coolgrey9
  #style,#script,#config
    display: none
    position: absolute
    width: 100%
    box-sizing: border-box
    padding: 5px
    top: 96px
    bottom: 0
    overflow-y: auto
    overflow-x: hidden
    &.current
      display: block
  .temp_css
    min-height: 256px
    margin: 0

#main
  position: absolute
  right: 0
  width: 100%

=management
  box-sizing: border-box
  display: inline-block
  float: left
  vertical-align: top
  height: $control_height

#manager
  position: fixed
  left: 0
  right: 0
  height: $control_height
  background: $menu_bg
  color: $menu_text
  z-index: 100
  font-size: 0.9em
  +box-shadow(0 2px 5px rgba(0,0,0,0.4))
  #manager_menu
    +management
    width: $control_height
    &.open
      width: 30%
    a
      display: block
      width: $control_height
      height: $control_height
      background:
        image: image-url('spanner.svg')
        position: center center
        repeat: no-repeat

  a
    color: $mid
  a.add, a.delete, a.save
    opacity: 0.75
    &:hover
      opacity: 1

  .header
    position: relative
    display: inline-block
    height: $control_height
    background-color: $menu_bg
    box-sizing: border-box
    float: left
    padding: 0 12px 0 5px
    a
      display: inline-block
      vertical-align: middle
    a.title
      padding: 10px 0
      color: $menu_text
      &.arrowed
        &:before
          content: "\025B8"
          display: inline-block
          vertical-align: top
          width: 8px
          font-family: sans-serif
          margin-right: 8px
    &:hover
      background-color: $menu_hover_bg
      a
        color: $menu_hover_text
    &.open
      background-color: $menu_up_bg
      a
        color: $menu_up_text
      a.title.arrowed
        &:before
          content: "\025BE"
          font-family: sans-serif
          margin-right: 8px
  .menu
    position: absolute
    display: none
    top: $control_height
    background-color: $menu_up_bg
    width: auto
    +box-shadow(0 4px 5px rgba(0,0,0,0.4))
    ul.menu_items
      list-style: none
      padding: 0
      margin: 0
      li
        position: relative
        padding: 6px 6px 6px 12px
        opacity: 0.8
        clear: left
        &:hover
          background-color: $menu_hover_bg
          opacity: 1
          a, span.a
            color: $menu_hover_text
          .controls
            display: inline-block
        a
          color: $menu_up_text
        a.title
          margin-right: 40px
        span[contenteditable]
          display: inline-block
          vertical-align: middle
          background-color: white
          color: $dark
          border: 0
          min-width: 40px
          padding: 3px
          margin-right: 40px
          border-radius: 5px
        span.slug
          display: none
        span.d, span.a
          display: inline-block
          vertical-align: middle
          min-width: 16px
          margin-right: 4px
          height: 16px
          color: $menu_up_text
          &:first-child
            min-width: 0
        span.controls
          position: absolute
          top: 7px
          right: 6px
          display: none
          a
            margin: 0
        &.new
          background-color: $warm
          color: $menu_hover_text
          a.title
            display: none
          span.controls, span.slug
            display: inline-block
        &.selected
          background-color: $green
          color: white
          a, span.a
            color: white
          &:hover
            background-color: darken($green, 10)
            a, span.a
              color: white
        &.destroyed
          text-decoration: line-through
          opacity: 0.4
  #sites
    position: relative
    margin: 0
    float: left
    .menu
      min-width: 120px
    #pages
      position: relative
      margin: 0
      float: left
      .menu
        min-width: 200px
      #sections
        .menu
          min-width: 300px
      #controls
        position: relative
        float: right
        a.save_page
          display: inline-block
          margin: 0 0 0 8px
          padding: 10px
          box-sizing: border-box
          height: $control_height
          background-color: $green
          color: white
      #sections
        position: relative
        margin: 0
        float: left


#editor
  z-index: 50
  margin-top: $control_height
  header
    overflow: hidden

  main
    overflow: hidden
    section
      position: relative
      a.admin
        position: absolute
        top: 10px
        right: 6px
      &.selected
        border: 1px dotted $green
        h2.label
          color: $green
      &:target
        border: 1px dotted $rubine
        h2.label
          color: $rubine



// probably site-specific
  



// undigested login stuff 



#session
  z-index: 60
  #form
    position: relative
    width: 600px
    margin-top: 100px
    margin-left: 40px
    
    h1
      color: $mid
      margin: 0
      font-size: 1.4rem

    .signin
      margin: 0 2em
      .confirmation
        padding-top: 12px
        display: none
      .qrcode
        display: inline-block
        vertical-align: top
        width: 276px
        margin: 0
        img
          padding: 10px
          background: white
      .instructions
        display: inline-block
        vertical-align: top
        width: 256px
        height: 256px
        margin: 0
        margin-left: 10px
        h4
          margin: -3px 0 0 0
        p
          margin: 0.25em 0

    form
      fieldset
        border: 0
        margin: 0
        padding: 0
        a.forgotten, a.lost
          float: right
          font-size: 0.9rem
          padding-top: 5px
          color: $mid
          +hover
        input[type="text"],input[type="email"],input[type="password"]
          padding: 16px
          width: 600px
          font-size: 1.8em
          border: 1px solid $pale
          outline: none
          +border-radius(4px)
          +light
          background:
            position: right 10px top 10px
            repeat: no-repeat
            image: url('/images/fieldsprite.png')
          &::-webkit-input-placeholder
            color: $pale
            font-size: 1rem
          &::-moz-placeholder
            color: $pale
            font-size: 1rem
          &:-ms-input-placeholder
            color: $pale
            font-size: 1rem
          &.placeholder
            color: $pale
            font-size: 1rem
            text-align: right
          &.valid
            background-position: right 22px top -82px
          &.invalid
            background-position: right 22px top -178px
        input[type="submit"]
          padding: 10px 20px 10px 15px
          margin: 0
          border: none
          background-color: white
          outline: none
          +box-shadow(0 1px 3px $dark)
          font-size: 1.5em
          +light
          +border-radius(3px)
          &:active
            color: $hover
            +box-shadow(inset 0 1px 6px $dark)
          &:disabled
            background-color: white
            color: $pale
            box-shadow: none

  .status_panel
    margin: 5px 5px 5px 0
    a.sign_out
      color: $pale
      +small